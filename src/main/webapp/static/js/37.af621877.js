"use strict";(self["webpackChunkstu_admin"]=self["webpackChunkstu_admin"]||[]).push([[37],{1037:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"studentInfo",attrs:{id:"studentInfo"}},[e("div",{staticClass:"tableHeader",attrs:{id:"tableHeader"}},[e("el-row",{staticStyle:{height:"100%","margin-left":"10px"},attrs:{type:"flex",justify:"start",align:"middle",gutter:5}},[e("el-col",{attrs:{span:3}},[e("el-input",{attrs:{placeholder:"请输入学生姓名"},model:{value:t.nameInput,callback:function(e){t.nameInput=e},expression:"nameInput"}})],1),e("el-col",{attrs:{span:3}},[e("el-input",{attrs:{placeholder:"请输入专业"},model:{value:t.majorInput,callback:function(e){t.majorInput=e},expression:"majorInput"}})],1),e("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:3,pull:1}},[e("el-button",{attrs:{type:"primary",size:"medium",loading:t.searchLoading},on:{click:t.searchClick}},[t._v("查询")])],1)],1)],1),e("div",{staticClass:"table"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{stripe:"","highlight-current-row":"","show-header":t.showHeader,data:t.tableData,height:t.tableHeight}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("student-info-expand",{attrs:{"stu-name":t.row.name,"stu-id":t.row.studentid}})]}}])}),e("el-table-column",{attrs:{prop:"studentid",label:"学号"}}),e("el-table-column",{attrs:{prop:"name",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{size:"medium"}},[t._v(t._s(a.row.name))])]}}])}),e("el-table-column",{attrs:{prop:"age",label:"年龄"}}),e("el-table-column",{attrs:{prop:"sex",label:"性别"}}),e("el-table-column",{attrs:{prop:"major",label:"专业"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleEdit(a.$index,a.row)}}},[t._v("编辑 ")]),e("el-button",{attrs:{size:"mini",type:"danger",loading:a.row.loading},on:{click:function(e){return t.handleDelete(a.$index,a.row)}}},[t._v("删除 ")])]}}])})],1)],1),e("el-dialog",{attrs:{title:"编辑学生信息",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("student-info-edit",{attrs:{"stu-info":t.selectEditStuInfo}})],1)],1)},o=[],l=a(2996),n=a.n(l),r=a(58);function i(){return(0,r.W)({url:"/stu-admin/student/selectAll",method:"get"})}function u(t){return(0,r.W)({url:"/stu-admin/student/selectByName",method:"get",params:{name:t}})}function d(t){return(0,r.W)({url:"/stu-admin/student/selectByMajor",method:"get",params:{major:t}})}function c(t){return(0,r.W)({url:"/stu-admin/student/deleteById",method:"get",params:{student_id:t}})}function m(t){return(0,r.W)({url:"/stu-admin/student/update",method:"post",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}})}var h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"expandInfo"},[e("div",{staticClass:"mainModule"},[e("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[e("el-col",{staticClass:"table",attrs:{span:12}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"table",attrs:{"highlight-current-row":"","max-height":300,"show-header":!1,data:t.tableData}},[e("el-table-column",{attrs:{prop:"courseId",label:"课程id"}}),e("el-table-column",{attrs:{prop:"courseName",label:"课程名字"}}),e("el-table-column",{attrs:{prop:"courseScore",label:"学分"}}),e("el-table-column",{attrs:{prop:"courseTime",label:"时长"}})],1)],1),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"description"},[e("el-descriptions",{attrs:{title:"课程统计"}},[e("el-descriptions-item",{attrs:{label:"修读课程数"}},[t._v(t._s(t.courseTotal))]),e("el-descriptions-item",{attrs:{label:"修读总学分"}},[t._v(t._s(t.courseScores))])],1)],1)])],1)],1)])},p=[],f={name:"StudentInfoExpand",data(){return{tableLoading:!1,courseTotal:0,courseScores:0,tableData:[{courseId:123456,courseName:"java 程序设计",courseScore:4,courseTime:"8周"},{courseId:123456,courseName:"java 程序设计",courseScore:4,courseTime:"8周"},{courseId:123456,courseName:"java 程序设计",courseScore:4,courseTime:"8周"},{courseId:123456,courseName:"java 程序设计",courseScore:4,courseTime:"8周"},{courseId:123456,courseName:"java 程序设计",courseScore:4,courseTime:"8周"},{courseId:123456,courseName:"java 程序设计",courseScore:4,courseTime:"8周"},{courseId:123456,courseName:"java 程序设计",courseScore:4,courseTime:"8周"},{courseId:123456,courseName:"java 程序设计",courseScore:4,courseTime:"8周"}]}},props:{stuName:String,stuId:Number},created(){console.log("expand name: "+this.stuName+" id: "+this.stuId)}},g=f,b=a(1001),I=(0,b.Z)(g,h,p,!1,null,"2eee18cc",null),v=I.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"stuEditForm"},[e("el-form",{attrs:{model:t.stuInfo,"label-position":"right","label-width":"80px"}},[e("el-form-item",{attrs:{label:"学生姓名"}},[e("el-input",{staticClass:"formInput",model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),e("el-form-item",{attrs:{label:"年龄"}},[e("el-input",{model:{value:t.formData.age,callback:function(e){t.$set(t.formData,"age",e)},expression:"formData.age"}})],1),e("el-form-item",{attrs:{label:"性别"}},[e("el-select",{staticClass:"formInput",attrs:{placeholder:"请选择性别"},model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}},[e("el-option",{attrs:{value:"男"}}),e("el-option",{attrs:{value:"女"}})],1)],1),e("el-form-item",{attrs:{label:"专业班级"}},[e("el-select",{staticClass:"formInput",attrs:{placeholder:"请选择活动专业"},model:{value:t.formData.major,callback:function(e){t.$set(t.formData,"major",e)},expression:"formData.major"}},t._l(this.majorData,(function(t){return e("el-option",{key:t.value,attrs:{value:t.value}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("创建")])],1)],1)],1)},x=[];a(7658);function w(){return(0,r.W)({url:"/stu-admin/clazz/selectAll"})}var j={name:"StudentInfoEdit",data(){return{majorData:[],formData:{studentid:"",name:"",age:"",sex:"",major:""}}},created(){w().then((t=>{if(!0===t.status){const e=t.data;let a=[];for(let t=0;t<e.length;t++)a.push({label:e[t].classname,value:e[t].classname});this.majorData=a}else n().warning("获取班级列表失败: "+t.message)}))},beforeMount(){this.formData.name=this.stuInfo.name,this.formData.studentid=this.stuInfo.studentid,this.formData.age=this.stuInfo.age,this.formData.sex=this.stuInfo.sex,this.formData.major=this.stuInfo.major},props:{stuInfo:Object},methods:{onSubmit(){console.log(this.formData),m(this.formData).then((t=>{!0===t.success?n().success("提交成功"):n().warning(t.message)}))}}},S=j,y=(0,b.Z)(S,D,x,!1,null,"49f2227c",null),_=y.exports,k={name:"StudentInfo",components:{StudentInfoExpand:v,StudentInfoEdit:_},data(){return{dialogVisible:!1,tableLoading:!1,showHeader:!1,searchLoading:!1,selectEditStuInfo:{},nameInput:"",majorInput:"",tableHeight:0,tableData:[{studentid:123456,name:"yong",age:18,sex:"男",major:"软件工程"},{studentid:123456,name:"yong",age:18,sex:"男",major:"软件工程"},{studentid:123456,name:"yong",age:18,sex:"男",major:"软件工程"}]}},created(){console.log("table length: "+this.tableData.length),this.showHeader=0!==this.tableData.length,this.$nextTick((()=>{this.tableHeight=document.getElementById("studentInfo").offsetHeight-document.getElementById("tableHeader").offsetHeight})),this.tableLoading=!0,i().then((t=>{!0===t.status&&(this.tableData=t.data,this.addLoadingToResp()),this.showHeader=0!==this.tableData.length,this.tableLoading=!1}))},methods:{addLoadingToResp(){for(let t=0;t<this.tableData.length;t++)this.$set(this.tableData[t],"loading",!1)},handleEdit(t,e){console.log("edit index: "+t+" row: "+e),this.selectEditStuInfo=e,this.dialogVisible=!0},handleDelete(t,e){console.log("delete index: "+t),e.loading=!0,c(e.studentid).then((a=>{!0!==a.success?n().warning(a.message):n().success("删除成功"),e.loading=!1,this.tableData.splice(t,1)}))},searchClick(){console.log("name: "+this.nameInput+" major: "+this.majorInput),this.searchLoading=!0,""!==this.nameInput?u(this.nameInput).then((t=>{!0===t.status&&(this.tableData=t.data,this.addLoadingToResp()),this.showHeader=0!==this.tableData.length,this.searchLoading=!1})):""!==this.majorInput?d(this.majorInput).then((t=>{!0===t.status&&(this.tableData=t.data,this.addLoadingToResp()),this.showHeader=0!==this.tableData.length,this.searchLoading=!1})):i().then((t=>{!0===t.status&&(this.tableData=t.data,this.addLoadingToResp()),this.showHeader=0!==this.tableData.length,this.tableLoading=!1,this.searchLoading=!1}))}}},L=k,T=(0,b.Z)(L,s,o,!1,null,"0a4e6f7b",null),C=T.exports}}]);
//# sourceMappingURL=37.af621877.js.map