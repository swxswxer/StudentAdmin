"use strict";(self["webpackChunkstu_admin"]=self["webpackChunkstu_admin"]||[]).push([[441],{3441:function(t,e,a){a.r(e),a.d(e,{default:function(){return v}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"courseInfo",attrs:{id:"courseInfo"}},[e("div",{staticClass:"table"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{stripe:"","highlight-current-row":"","show-header":t.showHeader,data:t.tableData,height:t.tableHeight}},[e("el-table-column",{attrs:{prop:"id",label:"课程id"}}),e("el-table-column",{attrs:{prop:"name",label:"课程名"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{size:"medium"}},[t._v(t._s(a.row.name))])]}}])}),e("el-table-column",{attrs:{prop:"credit",label:"课程学分"}}),e("el-table-column",{attrs:{prop:"time",label:"课程周数"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleEdit(a.$index,a.row)}}},[t._v("编辑 ")]),e("el-button",{attrs:{size:"mini",type:"danger",loading:a.row.loading},on:{click:function(e){return t.handleDelete(a.$index,a.row)}}},[t._v("删除 ")])]}}])})],1)],1),e("el-dialog",{ref:"dialog",attrs:{title:"编辑课程信息",visible:t.dialogVisible,width:"30%","before-close":t.beforeDialClose,"destroy-on-close":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("course-info-edit",{ref:"courseEdit",on:{stuInfoEditCallBack:t.editCallBack}})],1)],1)},l=[],s=a(2996),o=a.n(s),n=a(5574),r=a.n(n),d=a(8865),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"courseEditForm"},[e("el-form",{attrs:{model:t.formData,"label-position":"right","label-width":"80px"}},[e("el-form-item",{attrs:{label:"课程id"}},[e("el-input",{staticClass:"formInput",model:{value:t.formData.id,callback:function(e){t.$set(t.formData,"id",e)},expression:"formData.id"}})],1),e("el-form-item",{attrs:{label:"课程名字"}},[e("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),e("el-form-item",{attrs:{label:"课程学分"}},[e("el-input",{model:{value:t.formData.credit,callback:function(e){t.$set(t.formData,"credit",e)},expression:"formData.credit"}})],1),e("el-form-item",{attrs:{label:"课程周数"}},[e("el-input",{model:{value:t.formData.time,callback:function(e){t.$set(t.formData,"time",e)},expression:"formData.time"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)},c=[],m={name:"CourseInfoEdit",data(){return{hasSubmit:!1,majorData:[],formData:{id:0,name:"",credit:0,time:""}}},methods:{onSubmit(){(0,d.Hf)(this.formData).then((t=>{!0===t.success?(o().success("提交成功"),this.hasSubmit=!0,this.$emit("courseInfoEditCallBack",this.formData)):o().warning(t.message)}))}}},f=m,h=a(1001),b=(0,h.Z)(f,u,c,!1,null,"13c93e24",null),g=b.exports,p={name:"CourseInfo",components:{CourseInfoEdit:g},extends:r(),data(){return{dialogVisible:!1,tableLoading:!1,showHeader:!0,originSelectData:{},tableData:[],tableHeight:0}},mounted(){this.$refs.dialog.rendered=!0},created(){console.log("table length: "+this.tableData.length),this.$nextTick((()=>{this.tableHeight=document.getElementById("courseInfo").offsetHeight})),this.tableLoading=!0,(0,d.kk)().then((t=>{!0===t.status&&(this.tableData=t.data,this.addLoadingToResp()),this.tableLoading=!1}))},methods:{beforeDialClose(t){const e=this.$refs.courseEdit.hasSubmit;e||(this.$refs.courseEdit.formData.id=this.originSelectData.id,this.$refs.courseEdit.formData.name=this.originSelectData.name,this.$refs.courseEdit.formData.credit=this.originSelectData.credit,this.$refs.courseEdit.formData.time=this.originSelectData.time),t()},editCallBack(t){this.tableData[this.selectIndex]=t,console.log(this.tableData)},addLoadingToResp(){for(let t=0;t<this.tableData.length;t++)this.$set(this.tableData[t],"loading",!1)},handleEdit(t,e){this.selectIndex=t,Object.assign(this.originSelectData,e),this.$refs.courseEdit.formData=e,this.dialogVisible=!0},handleDelete(t,e){e.loading=!0,(0,d.A)(e.id).then((a=>{!0!==a.success?o().warning(a.message):o().success("删除成功"),e.loading=!1,this.tableData.splice(t,1)}))}}},D=p,k=(0,h.Z)(D,i,l,!1,null,"97e49800",null),v=k.exports},8865:function(t,e,a){a.d(e,{A:function(){return o},Hf:function(){return s},kk:function(){return l}});var i=a(58);function l(){return(0,i.W)({url:"/stu-admin/curriculum/selectAll",method:"get"})}function s(t){return(0,i.W)({url:"/stu-admin/curriculum/update",method:"post",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}})}function o(t){return(0,i.W)({url:"/stu-admin/curriculum/deleteById",method:"get",param:{id:t}})}}}]);
//# sourceMappingURL=441.f997eeed.js.map